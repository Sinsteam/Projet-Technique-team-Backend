<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Test envoi Json</title>
</head>
<body>
<form action="recupJson.php" method="post">
    <div>
        <label for="name">Nom :</label>
        <input type="text" id="name" name="user_name">
    </div>
    <div>
        <label for="mail">e-mail&nbsp;:</label>
        <input type="email" id="mail" name="user_mail">
    </div>
    <div>
        <label for="msg">Message :</label>
        <textarea id="msg" name="user_message"></textarea>
    </div>
    <button onclick="sendJSON()">Send JSON</button>
</form>
<script>
    function sendJSON(){

        let result = document.querySelector('.result');
        let name = document.querySelector('#name');
        let email = document.querySelector('#email');

        // Creating a XHR object
        let xhr = new XMLHttpRequest();
        let url = "recupJson.php";

        // open a connection
        xhr.open("POST", url, true);

        // Set the request header i.e. which type of content you are sending
        xhr.setRequestHeader("Content-Type", "application/json");

        // Create a state change callback
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {

                // Print received data from server
                result.innerHTML = this.responseText;

            }
        };

        // Converting JSON data to string
        var data = JSON.stringify({ "name": name.value, "email": email.value });

        // Sending data with the request
        xhr.send(data);
    }
</script>
</body>
</html>